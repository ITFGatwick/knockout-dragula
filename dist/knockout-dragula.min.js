!function(e,a){if("function"==typeof define&&define.amd)define(["exports","knockout","dragula"],a);else if("undefined"!=typeof exports)a(exports,require("knockout"),require("dragula"));else{var t={exports:{}};a(t.exports,e.ko,e.dragula),e.knockoutDragula=t.exports}}(this,function(e,a,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var a=c["default"].unwrap(e())||{},t={data:a.data||e()};return v.forEach(function(e){a.hasOwnProperty(e)&&(t[e]=a[e])}),t}function i(e,a,t){var n=d(a);n?n.drake.containers.push(e):n=o(a,f(e,t)),c["default"].utils.domNodeDisposal.addDisposeCallback(e,function(){return u(n,e)})}function d(e){var a=!0,t=!1,n=void 0;try{for(var r,i=k[Symbol.iterator]();!(a=(r=i.next()).done);a=!0){var d=r.value;if(d.name===e)return d}}catch(o){t=!0,n=o}finally{try{!a&&i["return"]&&i["return"]()}finally{if(t)throw n}}}function o(e,a){var t={name:e,drake:a};return k.push(t),t}function u(e,a){var t=e.drake.containers.indexOf(a);e.drake.containers.splice(t,1),e.drake.containers.length||l(e)}function l(e){var a=k.indexOf(e);k.splice(a,1),e.drake.destroy()}function f(e,a){var t=p["default"]([e],{invalid:c["default"].bindingHandlers.dragula.invalidTarget});return t.on("drop",s.bind(t,a)),t}function s(e,a,t,n){var r=c["default"].dataFor(a),i=c["default"].utils.domData.get(n,g),d=i.indexOf(r),o=c["default"].utils.domData.get(t,g),u=Array.prototype.indexOf.call(t.children,a);a.parentElement.removeChild(a),i.splice(d,1),o.splice(u,0,r),e.afterMove&&e.afterMove(r,d,i,u,o)}var c=n(a),p=n(t),v=["afterAdd","afterRender","as","beforeRemove"],g="ko_dragula_list",k=[];c["default"].bindingHandlers.dragula={invalidTarget:function(e){return"BUTTON"===e.tagName||"A"===e.tagName},init:function(e,a,t,n,d){var o=c["default"].utils.unwrapObservable(a())||{},u=r(a);return c["default"].utils.domData.set(e,g,u.data),c["default"].bindingHandlers.foreach.init(e,function(){return u},t,n,d),o.group?i(e,o.group,o):!function(){var a=f(e,o);c["default"].utils.domNodeDisposal.addDisposeCallback(e,function(){return a.destroy()})}(),{controlsDescendantBindings:!0}},update:function(e,a,t,n,i){var d=r(a);c["default"].utils.domData.set(e,g,d.data),c["default"].bindingHandlers.foreach.update(e,function(){return d},t,n,i)}}});