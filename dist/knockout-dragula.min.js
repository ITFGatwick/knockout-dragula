!function(e,r){if("function"==typeof define&&define.amd)define(["exports","module","knockout","dragula"],r);else if("undefined"!=typeof exports&&"undefined"!=typeof module)r(exports,module,require("knockout"),require("dragula"));else{var n={exports:{}};r(n.exports,n,e.ko,e.dragula),e.knockoutDragula=n.exports}}(this,function(e,r,n,t){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(e){for(var r=0;r<b.length;r++)if(b[r].name===e)return b[r]}function u(e,r){var n={name:e,drake:r};return b.push(n),n}function d(e,r){var n=k["default"](r);return n.on("drop",s),u(e,n)}function i(e,r){var n=e.drake.containers.indexOf(r);e.drake.containers.splice(n,1),e.drake.containers.length||f(e)}function f(e){var r=b.indexOf(e);b.splice(r,1),e.drake.destroy()}function l(e){var r=k["default"]([e],q);return r.on("drop",s),r}function s(e,r,n){var t=v["default"].dataFor(e),a=y(n,m),o=a.indexOf(t),u=y(r,m),d=Array.prototype.indexOf.call(r.children,e);e.parentElement.removeChild(e),a.splice(o,1),u.splice(d,0,t);var i=y(r,x);i&&i(t,o,a,d,u)}function c(e,r){var n={data:r.data||e()};return g.forEach(function(e){r.hasOwnProperty(e)&&(n[e]=r[e])}),n}function p(e,r){var n=o(e);n?n.drake.containers.push(r):n=u(e,l(r)),_(r,function(){return i(n,r)})}var v=a(n),k=a(t),g=["afterAdd","afterMove","afterRender","as","beforeRemove"],m="ko_dragula_list",x="ko_dragula_afterDrop",D=v["default"].unwrap,h=v["default"].utils.domData.set,y=v["default"].utils.domData.get,O=v["default"].bindingHandlers.foreach,_=v["default"].utils.domNodeDisposal.addDisposeCallback,b=[],q={};v["default"].bindingHandlers.dragula={init:function(e,r,n,t,a){var o=D(r())||{},u=c(r,o);return h(e,m,u.data),o.afterDrop&&h(e,x,o.afterDrop),O.init(e,function(){return u},n,t,a),o.group?p(o.group,e):!function(){var r=l(e);_(e,function(){return r.destroy()})}(),{controlsDescendantBindings:!0}},update:function(e,r,n,t,a){var o=D(r())||{},u=c(r,o);h(e,m,u.data),o.afterDrop&&h(e,x,o.afterDrop),O.update(e,function(){return u},n,t,a)}},r.exports={defaultOptions:q,add:u,options:d,find:o,destroy:f}});