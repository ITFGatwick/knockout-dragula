!function(e,n){if("function"==typeof define&&define.amd)define(["exports","module","knockout","dragula"],n);else if("undefined"!=typeof exports&&"undefined"!=typeof module)n(exports,module,require("knockout"),require("dragula"));else{var r={exports:{}};n(r.exports,r,e.ko,e.dragula),e.knockoutDragula=r.exports}}(this,function(e,n,r,t){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(e){for(var n=0;n<w.length;n++)if(w[n].name===e)return w[n]}function u(e,n){var r={name:e,drake:n};return w.push(r),r}function d(e,n){var r=(0,x["default"])(n);return i(r),u(e,r)}function i(e){e.on("drop",s),e.on("remove",p),e.on("cancel",v)}function f(e,n){var r=e.drake.containers.indexOf(n);e.drake.containers.splice(r,1),e.drake.containers.length||l(e)}function l(e){var n=w.indexOf(e);w.splice(n,1),e.drake.destroy()}function c(e,n){var r=(0,x["default"])([e],n);return i(r),r}function s(e,n,r){var t=m["default"].dataFor(e),a=C(r,h),o=a.indexOf(t),u=C(n,h),d=Array.prototype.indexOf.call(n.children,e);n.removeChild(e),a.splice(o,1),u.splice(d,0,t);var i=C(n,y);i&&i(t,o,a,d,u)}function p(e,n){var r=m["default"].dataFor(e),t=C(n,h),a=t.indexOf(r);t.splice(a,1);var o=C(n,_);o&&o(r,a,t)}function v(e,n){var r=m["default"].dataFor(e),t=C(n,h),a=t.indexOf(r);n.removeChild(e),t.splice(a,1),t.splice(a,0,r)}function g(e,n){var r={data:n.data||e()};return D.forEach(function(e){n.hasOwnProperty(e)&&(r[e]=n[e])}),r}function k(e,n){var r=o(n.group);r?r.drake.containers.push(e):r=u(n.group,c(e,n)),q(e,function(){return f(r,e)})}var m=a(r),x=a(t),D=["afterAdd","afterMove","afterRender","as","beforeRemove"],h="ko_dragula_list",y="ko_dragula_afterDrop",_="ko_dragula_afterDelete",O=m["default"].unwrap,b=m["default"].utils.domData.set,C=m["default"].utils.domData.get,F=m["default"].bindingHandlers.foreach,q=m["default"].utils.domNodeDisposal.addDisposeCallback,w=[];m["default"].bindingHandlers.dragula={init:function(e,n,r,t,a){var o=O(n())||{},u=g(n,o);return b(e,h,u.data),b(e,y,o.afterDrop),b(e,_,o.afterDelete),F.init(e,function(){return u},r,t,a),o.group?k(e,o):!function(){var n=c(e,o);q(e,function(){return n.destroy()})}(),{controlsDescendantBindings:!0}},update:function(e,n,r,t,a){var o=O(n())||{},u=g(n,o);b(e,h,u.data),b(e,y,o.afterDrop),b(e,_,o.afterDelete),F.update(e,function(){return u},r,t,a)}},n.exports={add:u,options:d,find:o,destroy:l}});