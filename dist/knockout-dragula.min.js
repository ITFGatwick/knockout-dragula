!function(e,r){if("function"==typeof define&&define.amd)define(["exports","module","knockout","dragula"],r);else if("undefined"!=typeof exports&&"undefined"!=typeof module)r(exports,module,require("knockout"),require("dragula"));else{var t={exports:{}};r(t.exports,t,e.ko,e.dragula),e.knockoutDragula=t.exports}}(this,function(e,r,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(e){for(var r=0;r<A.length;r++)if(A[r].name===e)return A[r]}function u(e,r){var t={name:e,drake:r};return A.push(t),t}function d(e,r){var t=m["default"](r);return i(t),u(e,t)}function i(e){e.on("drop",c),e.on("remove",p)}function f(e,r){var t=e.drake.containers.indexOf(r);e.drake.containers.splice(t,1),e.drake.containers.length||l(e)}function l(e){var r=A.indexOf(e);A.splice(r,1),e.drake.destroy()}function s(e){var r=m["default"]([e]);return i(r),r}function c(e,r,t){var n=g["default"].dataFor(e),a=b(t,D),o=a.indexOf(n),u=b(r,D),d=Array.prototype.indexOf.call(r.children,e);r.removeChild(e),a.splice(o,1),u.splice(d,0,n);var i=b(r,h);i&&i(n,o,a,d,u)}function p(e,r){var t=g["default"].dataFor(e),n=b(r,D),a=n.indexOf(t);n.splice(a,1);var o=b(r,y);o&&o(t,a,n)}function v(e,r){var t={data:r.data||e()};return x.forEach(function(e){r.hasOwnProperty(e)&&(t[e]=r[e])}),t}function k(e,r){var t=o(e);t?t.drake.containers.push(r):t=u(e,s(r)),w(r,function(){return f(t,r)})}var g=a(t),m=a(n),x=["afterAdd","afterMove","afterRender","as","beforeRemove"],D="ko_dragula_list",h="ko_dragula_afterDrop",y="ko_dragula_afterDelete",_=g["default"].unwrap,O=g["default"].utils.domData.set,b=g["default"].utils.domData.get,q=g["default"].bindingHandlers.foreach,w=g["default"].utils.domNodeDisposal.addDisposeCallback,A=[];g["default"].bindingHandlers.dragula={init:function(e,r,t,n,a){var o=_(r())||{},u=v(r,o);return O(e,D,u.data),O(e,h,o.afterDrop),O(e,y,o.afterDelete),q.init(e,function(){return u},t,n,a),o.group?k(o.group,e):!function(){var r=s(e);w(e,function(){return r.destroy()})}(),{controlsDescendantBindings:!0}},update:function(e,r,t,n,a){var o=_(r())||{},u=v(r,o);O(e,D,u.data),O(e,h,o.afterDrop),O(e,y,o.afterDelete),q.update(e,function(){return u},t,n,a)}},r.exports={add:u,options:d,find:o,destroy:l}});